(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,type:s,...r},l)=>(0,a.jsx)("input",{type:s,className:(0,t.cn)("flex h-9 w-full rounded-md border border-black/10 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:l,...r}));r.displayName="Input",e.s(["Input",()=>r])},10204,e=>{"use strict";var a=e.i(43476),s=e.i(71645);e.i(74080);var t=e.i(91918),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,r)=>{let l=(0,t.createSlot)(`Primitive.${r}`),i=s.forwardRef((e,s)=>{let{asChild:t,...i}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,a.jsx)(t?l:r,{...i,ref:s})});return i.displayName=`Primitive.${r}`,{...e,[r]:i}},{}),l=s.forwardRef((e,s)=>(0,a.jsx)(r.label,{...e,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));l.displayName="Label";var i=e.i(25913),n=e.i(75157);let d=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(l,{ref:t,className:(0,n.cn)(d(),e),...s}));c.displayName=l.displayName,e.s(["Label",()=>c],10204)},15288,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(75157);let r=s.forwardRef(({className:e,...s},r)=>(0,a.jsx)("div",{ref:r,className:(0,t.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...s}));r.displayName="Card",e.s(["Card",()=>r])},73765,e=>{"use strict";let a=(0,e.i(75254).default)("trash",[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["default",()=>a])},79491,e=>{"use strict";let a=(0,e.i(75254).default)("building",[["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M9 22v-3a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3",key:"cabbwy"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]]);e.s(["default",()=>a])},27330,e=>{"use strict";let a=(0,e.i(75254).default)("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);e.s(["default",()=>a])},19661,e=>{"use strict";var a=e.i(95187),s=(0,a.createServerReference)("7ca72591cff8a49692d257fc07bec718f0bcbd6183",a.callServer,void 0,a.findSourceMapURL,"inviteUserAction");e.s(["inviteUserAction",()=>s])},72252,e=>{"use strict";var a=e.i(43476),s=e.i(71645),t=e.i(19455),r=e.i(93479),l=e.i(10204),i=e.i(15288),n=e.i(8776),d=e.i(75254);let c=(0,d.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);var o=e.i(73765);let h=(0,d.default)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var x=e.i(46753),u=e.i(79491),m=e.i(27330),p=e.i(95187),f=(0,p.createServerReference)("40c1750ccd2355d48aa7be1f33f594c015f56ef1b2",p.callServer,void 0,p.findSourceMapURL,"createOrgAction"),v=e.i(19661),j=(0,p.createServerReference)("60dc9c5c2976b8ab1dd7422d024e0835a57dccc428",p.callServer,void 0,p.findSourceMapURL,"deleteUserAction"),g=(0,p.createServerReference)("707862f4f1cee8282c96a5f199893de6ca9450ce08",p.callServer,void 0,p.findSourceMapURL,"updateUserAction"),y=e.i(18566),N=e.i(80376);function b({initialUsers:e,initialOrgs:d}){let{toast:p}=(0,n.useToast)(),b=(0,y.useRouter)(),[w,S]=(0,s.useState)(!1),[k,C]=(0,s.useState)(!1),[M,U]=(0,s.useState)(!1),[L,_]=(0,s.useState)(null),[R,z]=(0,s.useState)(""),[A,O]=(0,s.useState)(""),[B,I]=(0,s.useState)(""),[T,P]=(0,s.useState)(""),[D,E]=(0,s.useState)("partner"),[H,$]=(0,s.useState)(""),[F,q]=(0,s.useState)(""),[K,V]=(0,s.useState)(""),[J,G]=(0,s.useState)("partner"),[Q,W]=(0,s.useState)(""),X=async()=>{if(R){S(!0);try{let{success:e,error:a}=await f(R);if(!e)throw Error(a);p.success("Organization created!"),z(""),b.refresh()}catch(e){p.error(e.message)}finally{S(!1)}}},Y=async()=>{if(A){S(!0);try{let{success:e,error:a}=await (0,v.inviteUserAction)(A,D,"none"===H||""===H?null:H,B,T);if(!e)throw Error(a);p.success("User invited successfully!"),C(!1),O(""),I(""),P(""),E("partner"),$(""),b.refresh()}catch(e){p.error(e.message)}finally{S(!1)}}},Z=async()=>{if(L){S(!0);try{let{success:e,error:a}=await g(L.id,L.clerk_user_id,{firstName:F,lastName:K,role:J,orgId:"none"===Q||""===Q?null:Q});if(!e)throw Error(a);p.success("User updated!"),U(!1),b.refresh()}catch(e){p.error(e.message)}finally{S(!1)}}},ee=async e=>{if(confirm("Are you sure you want to delete this user? This cannot be undone.")){S(!0);try{let{success:a,error:s}=await j(e.id,e.clerk_user_id);if(!a)throw Error(s);p.success("User deleted."),b.refresh()}catch(e){p.error(e.message)}finally{S(!1)}}};return(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)(i.Card,{className:"p-6",children:[(0,a.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,a.jsxs)("h2",{className:"text-lg font-bold flex items-center gap-2",children:[(0,a.jsx)(u.default,{className:"h-5 w-5 text-gray-500"}),"Organizations"]})}),(0,a.jsxs)("div",{className:"flex gap-4 items-end mb-4",children:[(0,a.jsxs)("div",{className:"space-y-1 flex-1 max-w-sm",children:[(0,a.jsx)(l.Label,{className:"text-xs text-gray-500",children:"New Organization Name"}),(0,a.jsx)(r.Input,{value:R,onChange:e=>z(e.target.value),placeholder:"e.g. Acme Corp",className:"h-9"})]}),(0,a.jsx)(t.Button,{onClick:X,disabled:!R||w,size:"sm",children:"Create Org"})]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2 mt-4",children:[d.map(e=>(0,a.jsx)("div",{className:"px-3 py-1 bg-gray-100 rounded-full text-xs font-medium border text-gray-700",children:e.name},e.id)),0===d.length&&(0,a.jsx)("span",{className:"text-sm text-gray-400 italic",children:"No organizations yet."})]})]}),(0,a.jsxs)(i.Card,{className:"p-0 overflow-hidden border shadow-sm",children:[(0,a.jsxs)("div",{className:"p-6 border-b flex justify-between items-center bg-gray-50/50",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("h2",{className:"text-lg font-bold flex items-center gap-2",children:[(0,a.jsx)(x.default,{className:"h-5 w-5 text-gray-500"}),"Users"]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Manage access and organization membership."})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(t.Button,{variant:"outline",size:"sm",onClick:()=>{b.refresh()},disabled:w,children:[(0,a.jsx)(c,{className:`h-4 w-4 mr-2 ${w?"animate-spin":""}`}),"Refresh"]}),(0,a.jsxs)(N.Sheet,{open:k,onOpenChange:C,children:[(0,a.jsx)(N.SheetTrigger,{asChild:!0,children:(0,a.jsxs)(t.Button,{size:"sm",children:[(0,a.jsx)(m.default,{className:"h-4 w-4 mr-2"}),"Add User"]})}),(0,a.jsxs)(N.SheetContent,{children:[(0,a.jsxs)(N.SheetHeader,{children:[(0,a.jsx)(N.SheetTitle,{children:"Add New User"}),(0,a.jsx)(N.SheetDescription,{children:"Create a new user account. They will be given a default password."})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{children:"Email Address"}),(0,a.jsx)(r.Input,{value:A,onChange:e=>O(e.target.value),placeholder:"email@example.com"}),(0,a.jsx)("p",{className:"text-[10px] text-muted-foreground",children:"Default password: StarterClub!2025"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{children:"First Name"}),(0,a.jsx)(r.Input,{value:B,onChange:e=>I(e.target.value),placeholder:"Jane"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{children:"Last Name"}),(0,a.jsx)(r.Input,{value:T,onChange:e=>P(e.target.value),placeholder:"Doe"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{children:"Role"}),(0,a.jsxs)("select",{className:"w-full h-10 border rounded-md px-3 text-sm",value:D,onChange:e=>E(e.target.value),children:[(0,a.jsx)("option",{value:"partner",children:"Partner"}),(0,a.jsx)("option",{value:"partner_admin",children:"Partner Admin"}),(0,a.jsx)("option",{value:"admin",children:"Super Admin"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{children:"Organization"}),(0,a.jsxs)("select",{className:"w-full h-10 border rounded-md px-3 text-sm",value:H,onChange:e=>$(e.target.value),children:[(0,a.jsx)("option",{value:"",children:"-- No Organization --"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsx)(N.SheetFooter,{children:(0,a.jsx)(t.Button,{onClick:Y,disabled:w||!A,children:"Create User"})})]})]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,a.jsx)("thead",{className:"bg-gray-50 text-gray-500 font-medium border-b",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3",children:"User"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3",children:"Organization"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right",children:"Actions"})]})}),(0,a.jsxs)("tbody",{className:"divide-y",children:[e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50/50",children:[(0,a.jsxs)("td",{className:"px-6 py-4",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:e.first_name||e.last_name?`${e.first_name||""} ${e.last_name||""}`:(0,a.jsx)("span",{className:"text-gray-400 italic",children:"No Name"})}),(0,a.jsx)("div",{className:"text-xs text-gray-500 font-mono truncate max-w-[150px]",title:e.clerk_user_id,children:e.clerk_user_id})]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium capitalize
                                            ${"admin"===e.role?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:e.role.replace("_"," ")})}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-600",children:(e=>{if(!e)return"-- No Org --";let a=d.find(a=>a.id===e);return a?a.name:"Unknown Org"})(e.org_id)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right",children:(0,a.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-blue-600",onClick:()=>{_(e),q(e.first_name||""),V(e.last_name||""),G(e.role),W(e.org_id||"none"),U(!0)},children:(0,a.jsx)(h,{className:"h-4 w-4"})}),(0,a.jsx)(t.Button,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-500 hover:text-red-600",onClick:()=>ee(e),children:(0,a.jsx)(o.default,{className:"h-4 w-4"})})]})})]},e.id)),0===e.length&&(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"px-6 py-8 text-center text-gray-400",children:"No users found. Create one to get started."})})]})]})})]}),(0,a.jsx)(N.Sheet,{open:M,onOpenChange:U,children:(0,a.jsxs)(N.SheetContent,{children:[(0,a.jsxs)(N.SheetHeader,{children:[(0,a.jsx)(N.SheetTitle,{children:"Edit User"}),(0,a.jsx)(N.SheetDescription,{children:"Update user details and access."})]}),L&&(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)(l.Label,{className:"text-xs text-gray-500",children:"User ID"}),(0,a.jsx)("div",{className:"text-xs font-mono bg-gray-100 p-2 rounded",children:L.clerk_user_id})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{children:"First Name"}),(0,a.jsx)(r.Input,{value:F,onChange:e=>q(e.target.value)})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{children:"Last Name"}),(0,a.jsx)(r.Input,{value:K,onChange:e=>V(e.target.value)})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{children:"Role"}),(0,a.jsxs)("select",{className:"w-full h-10 border rounded-md px-3 text-sm",value:J,onChange:e=>G(e.target.value),children:[(0,a.jsx)("option",{value:"partner",children:"Partner"}),(0,a.jsx)("option",{value:"partner_admin",children:"Partner Admin"}),(0,a.jsx)("option",{value:"admin",children:"Super Admin"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(l.Label,{children:"Organization"}),(0,a.jsxs)("select",{className:"w-full h-10 border rounded-md px-3 text-sm",value:Q,onChange:e=>W(e.target.value),children:[(0,a.jsx)("option",{value:"none",children:"-- No Organization --"}),d.map(e=>(0,a.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,a.jsxs)(N.SheetFooter,{children:[(0,a.jsx)(t.Button,{variant:"outline",onClick:()=>U(!1),children:"Cancel"}),(0,a.jsx)(t.Button,{onClick:Z,disabled:w,children:"Save Changes"})]})]})})]})}e.s(["default",()=>b],72252)}]);