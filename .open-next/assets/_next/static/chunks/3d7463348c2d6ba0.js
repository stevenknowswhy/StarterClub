(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93479,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(75157);let a=t.forwardRef(({className:e,type:t,...a},i)=>(0,r.jsx)("input",{type:t,className:(0,s.cn)("flex h-9 w-full rounded-md border border-black/10 bg-transparent px-3 py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",e),ref:i,...a}));a.displayName="Input",e.s(["Input",()=>a])},10204,e=>{"use strict";var r=e.i(43476),t=e.i(71645);e.i(74080);var s=e.i(91918),a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,a)=>{let i=(0,s.createSlot)(`Primitive.${a}`),n=t.forwardRef((e,t)=>{let{asChild:s,...n}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(s?i:a,{...n,ref:t})});return n.displayName=`Primitive.${a}`,{...e,[a]:n}},{}),i=t.forwardRef((e,t)=>(0,r.jsx)(a.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));i.displayName="Label";var n=e.i(25913),l=e.i(75157);let o=(0,n.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)(i,{ref:s,className:(0,l.cn)(o(),e),...t}));d.displayName=i.displayName,e.s(["Label",()=>d],10204)},87486,e=>{"use strict";var r=e.i(43476),t=e.i(25913),s=e.i(75157);let a=(0,t.cva)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:t,...i}){return(0,r.jsx)("div",{className:(0,s.cn)(a({variant:t}),e),...i})}e.s(["Badge",()=>i])},3908,e=>{"use strict";let r=(0,e.i(75254).default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["default",()=>r])},72478,e=>{"use strict";var r=e.i(43476);function t({headers:e,children:t}){return(0,r.jsx)("div",{className:"w-full overflow-auto rounded-md border",children:(0,r.jsxs)("table",{className:"w-full caption-bottom text-sm text-left",children:[(0,r.jsx)("thead",{className:"[&_tr]:border-b",children:(0,r.jsx)("tr",{className:"border-b transition-colors bg-gray-50/50 hover:bg-gray-50/50",children:e.map((e,t)=>(0,r.jsx)("th",{className:"h-12 px-4 align-middle font-medium text-muted-foreground",children:e},t))})}),(0,r.jsx)("tbody",{className:"[&_tr:last-child]:border-0",children:t})]})})}function s({children:e,className:t=""}){return(0,r.jsx)("tr",{className:`border-b transition-colors hover:bg-muted/50 ${t}`,children:e})}function a({children:e,className:t="",...s}){return(0,r.jsx)("td",{className:`p-4 align-middle ${t}`,...s,children:e})}e.s(["ResourceCell",()=>a,"ResourceRow",()=>s,"ResourceTable",()=>t])},4404,e=>{"use strict";var r=e.i(43476),t=e.i(71645),s=e.i(19455),a=e.i(93479),i=e.i(10204),n=e.i(80376),l=e.i(72478),o=e.i(95187),d=(0,o.createServerReference)("606d96c43513b2eb33e8430c678d462b791dc9be4f",o.callServer,void 0,o.findSourceMapURL,"createApiKeyAction"),c=(0,o.createServerReference)("408dd1b2a437f72b1f473e93bd04f163ac57062008",o.callServer,void 0,o.findSourceMapURL,"revokeApiKeyAction"),u=e.i(8776),f=e.i(3908),h=e.i(75254);let m=(0,h.default)("key",[["path",{d:"m15.5 7.5 2.3 2.3a1 1 0 0 0 1.4 0l2.1-2.1a1 1 0 0 0 0-1.4L19 4",key:"g0fldk"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}]]),x=(0,h.default)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);var p=e.i(87486);function b({initialKeys:e}){let[o,h]=(0,t.useState)(e),[b,y]=(0,t.useState)(!1),[v,g]=(0,t.useState)(!1),[j,w]=(0,t.useState)(""),[N,R]=(0,t.useState)(null),{toast:k}=(0,u.useToast)(),S=async()=>{g(!0);try{let{success:e,data:r,error:t}=await d(j);if(!e)throw Error(t);R(r.key),h(e=>[{id:r.id,name:j,key_hash:"...",status:"active",created_at:new Date().toISOString(),partner_orgs:null},...e]),k.success("API Key Created"),w("")}catch(e){k.error(e.message)}finally{g(!1)}},C=async e=>{if(confirm("Are you sure you want to revoke this key? apps using it will break.")){g(!0);try{let{success:r,error:t}=await c(e);if(!r)throw Error(t);h(r=>r.map(r=>r.id===e?{...r,status:"revoked"}:r)),k.success("Key Revoked")}catch(e){k.error(e.message)}finally{g(!1)}}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"flex justify-end mb-4",children:(0,r.jsxs)(n.Sheet,{open:b,onOpenChange:e=>{e||R(null),y(e)},children:[(0,r.jsx)(n.SheetTrigger,{asChild:!0,children:(0,r.jsxs)(s.Button,{children:[(0,r.jsx)(f.default,{className:"mr-2 h-4 w-4"})," Generate Key"]})}),(0,r.jsxs)(n.SheetContent,{children:[(0,r.jsx)(n.SheetHeader,{children:(0,r.jsx)(n.SheetTitle,{children:"Generate API Key"})}),(0,r.jsx)("div",{className:"space-y-6 mt-6",children:N?(0,r.jsxs)("div",{className:"space-y-4 bg-green-50 p-4 rounded border border-green-200",children:[(0,r.jsxs)("div",{className:"flex items-center text-green-800 font-bold mb-2",children:[(0,r.jsx)(m,{className:"mr-2 h-4 w-4"})," Key Generated!"]}),(0,r.jsx)("p",{className:"text-sm text-green-700",children:"Copy this key now. You won't be able to see it again."}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsx)(a.Input,{className:"font-mono bg-white",value:N,readOnly:!0}),(0,r.jsx)(s.Button,{size:"icon",variant:"outline",onClick:()=>{navigator.clipboard.writeText(N),k.success("Copied!")},children:(0,r.jsx)(x,{className:"h-4 w-4"})})]}),(0,r.jsx)(s.Button,{variant:"secondary",className:"w-full",onClick:()=>y(!1),children:"Done"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i.Label,{children:"Key Name"}),(0,r.jsx)(a.Input,{placeholder:"e.g. My Integration",value:j,onChange:e=>w(e.target.value)})]}),(0,r.jsx)(s.Button,{onClick:S,disabled:v||!j,className:"w-full",children:v?"Generating...":"Generate Key"})]})})]})]})}),(0,r.jsxs)(l.ResourceTable,{headers:["Name","Org","Status","Created","Actions"],children:[o.map(e=>(0,r.jsxs)(l.ResourceRow,{className:"revoked"===e.status?"opacity-50":"",children:[(0,r.jsxs)(l.ResourceCell,{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsxs)("div",{className:"text-xs text-muted-foreground font-mono",children:["ID: ",e.id]})]}),(0,r.jsx)(l.ResourceCell,{children:e.partner_orgs?.name||"-"}),(0,r.jsx)(l.ResourceCell,{children:(0,r.jsx)(p.Badge,{variant:"active"===e.status?"default":"secondary",children:e.status})}),(0,r.jsx)(l.ResourceCell,{children:new Date(e.created_at).toLocaleDateString()}),(0,r.jsx)(l.ResourceCell,{children:"active"===e.status&&(0,r.jsx)(s.Button,{variant:"destructive",size:"sm",onClick:()=>C(e.id),disabled:v,children:"Revoke"})})]},e.id)),0===o.length&&(0,r.jsx)(l.ResourceRow,{children:(0,r.jsx)(l.ResourceCell,{className:"text-center text-muted-foreground p-8",colSpan:5,children:"No API Keys found."})})]})]})}e.s(["default",()=>b],4404)}]);